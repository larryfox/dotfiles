#!/usr/bin/env bash
set -e

ioreg -rc AppleSmartBattery | awk -F ' = ' '
/CurrentCapacity/   { cur_bat = $2 }
/MaxCapacity/       { max_bat = $2 }
/ExternalConnected/ { plug = $2 }
END {
    if (plug == "Yes") { printf "ðŸ”Œ  " } else { printf "ðŸ”‹  " }
    printf "%.3g%%", (cur_bat/max_bat)*100
}'
exit
